{
  "db_name": "PostgreSQL",
  "query": "\n        WITH threshholded_users_achievements AS (\n            SELECT\n                users_achievements.username,\n                id\n            FROM\n                users_achievements\n            JOIN\n                (SELECT username FROM users_achievements GROUP BY username HAVING count(*) >= $1) threshholded_users\n            ON\n                users_achievements.username = threshholded_users.username\n        )\n        INSERT INTO\n            achievements_percent(id, percent)\n        SELECT\n            id,\n            COUNT(*)::float / (\n                SELECT COUNT(*) FROM users WHERE EXISTS (\n                    SELECT * FROM threshholded_users_achievements WHERE users.username = threshholded_users_achievements.username\n                )\n            )\n        FROM\n            threshholded_users_achievements\n        GROUP BY\n            id\n        ",
  "describe": {
    "columns": [],
    "parameters": {
      "Left": [
        "Int8"
      ]
    },
    "nullable": []
  },
  "hash": "c6b10bf31b1f2a5fb5c59f13be701680dc71d3e5c19db4707a1919e08ade7d00"
}
